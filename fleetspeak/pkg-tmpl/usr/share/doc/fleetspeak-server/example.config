# An example fleetspeak configuration file, as needed by the fleetspeak-config
# tool.
#
# This is a text format fleetspeak.config.Config protocol buffer.
#
# Detailed docs in:
# https://github.com/google/fleetspeak/blob/master/fleetspeak/src/config/proto/fleetspeak_config/config.proto
# https://github.com/google/fleetspeak/blob/master/fleetspeak/src/components/proto/fleetspeak_components/config.proto

### Configuration name.
#
# May appear in certificates generated by the fleetspeak-config tool.
configuration_name: "Lazy Corp"

### Server component configuration
components_config {

  ### Mysql connection string.
  #
  # See: https://github.com/go-sql-driver/mysql#dsn-data-source-name
  
  mysql_data_source_name: "/mydb"

  ### PROXY protocol support
  #
  # Uncomment if your fleetspeak server will run behind a load balancer. The
  # load balancer must implement the PROXY protocol in order to provide
  # FS with the correct observed client IP.
  #
  # https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt
  
  # proxy_protocol: true

  ### Basic client filtering
  #
  # If set, the server will perform a basic sanity check that the client is
  # meant for this server installation. To use, set to something specific to
  # this installation.
  
  # required_label: "lazy-corp"

  https_confg {
  
    ### Listen address
    #
    # The bind address that FS server processes will listen to. Dependent on your
    # intended network configuration. Also see public_host_port, below.
    listen_address: ":443"
  }
}

### Trusted certificate
#
# If this file does not exist, a certificate and key file will be created in
# the locations configured here.
#
# Clients will be configured to trust server certificates chained back to this,
# and the associated private key should be considered sensitive.
#
# The key for this certificate is only required by the configuration tool if it
# is needs to mint a new server certificate. Serious users should consider
# keeping the key offline, in an HSM, etc.

trusted_cert_file: "/etc/fleetspeak-server/ca.pem"
trusted_cert_key_file "/etc/fleetspeak-server/ca-key.pem"

### Server certificate
#
# If this file does not exist, a certificate and key file will be created in the
# locations configured here, and signed using the trusted certificate, above.
#
# The resulting server configuration will identify itself using this key.

server_cert_file: "/etc/fleetspeak-server/server.pem"
server_cert_key_file: "/etc/fleetspeak-server/server-key.pem"

### Public server addresses
#
# The public hostnames or IP addresses through the FS servers will be visible to the
# FS clients. Dependent on your planned network configuration.
#
# The server certificate must cover these addresses, this means you must add them
# if you manage your own server certificates, and regenerate your server certificate
# if these change.

public_host_port: "fs.lazy-corp.com:443"
#public_host_port: "10.0.0.5:443"
